<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Quản lý lớp học phần</title>
        <link rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    </head>
    <body>
        <div class="container mt-5">
            <h2>Quản lý lớp học phần</h2>
            <form>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="courseInput">Môn học:</label>
                        <input type="text" class="form-control" id="courseInput"
                            placeholder="Nhập tên môn học">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="creditInput">Số tín chỉ:</label>
                        <input type="number" class="form-control"
                            id="creditInput" placeholder="Nhập số tín chỉ">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="theoryHoursInput">Số tiết lý thuyết:</label>
                        <input type="number" class="form-control"
                            id="theoryHoursInput"
                            placeholder="Nhập số tiết lý thuyết">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="practiceHoursInput">Số tiết thực
                            hành:</label>
                        <input type="number" class="form-control"
                            id="practiceHoursInput"
                            placeholder="Nhập số tiết thực hành">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="feeInput">Học phí:</label>
                        <input type="number" class="form-control" id="feeInput"
                            placeholder="Nhập học phí">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <label for="semesterSelect">Học kì:</label>
                        <select class="form-control" id="semesterSelect">
                        </select>
                    </div>
                    <div class="form-group col-md-6">
                        <label>Trạng thái:</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio"
                                name="statusRadio" id="status1" value="Đang mở">
                            <label class="form-check-label" for="status1">Chấp
                                nhận mở lớp</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio"
                                name="statusRadio" id="status2" value="Đã đóng">
                            <label class="form-check-label" for="status2">Đã
                                đóng</label>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
            <br>
            <h3>Danh sách lớp học phần</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>STT</th>
                        <th>Môn học</th>
                        <th>Số tín chỉ</th>
                        <th>Số tiết lý thuyết</th>
                        <th>Số tiết thực hành</th>
                        <th>Học phí</th>
                        <th>Học kì</th>
                        <th>Trạng thái</th>
                    </tr>
                </thead>
                <tbody id="classList">
                    <!-- Danh sách lớp học phần sẽ được thêm vào đây -->
                </tbody>
            </table>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        <script>
                var courses=[
                    {"_id":"78cec458-3869-4307-b9d6-67000ab046b1","subject":{"_id":"0ffebab2-fdb8-457e-a56f-08e3f744ed56","name":"Lập trình hướng đối tượng","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"0980b34b-5fa2-4b3e-9644-261f952cdeff","subject":{"_id":"54689d6e-868f-477b-8fcf-a573fbe9a584","name":"Những vấn đề xã hội và đạo đức nghề nghiệp","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"a951484e-e215-49e1-86ed-531c35c6aeb1","subject":{"_id":"d616658d-bba5-460e-a0c5-9c51b328de71","name":"Cấu trúc rời rạc","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"a7a80be1-2fb1-40e2-a3ef-6486a8fe4b29","subject":{"_id":"2d401045-403b-4d29-8c6d-abac0e7a8938","name":"Kỹ năng sử dụng bàn phím và thiết bị văn phòng","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"42d28ec0-9486-4907-be96-35ebf9df29c6","subject":{"_id":"bae90ee8-ad04-47a3-8ae1-edd84dc830ff","name":"Logic học","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"f0cca71a-3af1-40a1-9e85-1c2ac0935607","subject":{"_id":"602e527e-1a33-4c12-aefd-79caf67f5a0d","name":"Lập trình phân tán với công nghệ Java","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["5688926e-17c6-4cce-bc29-df1e29e60304"]},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"4c7f1b47-84d1-48c8-bfc1-715c21ed245c","subject":{"_id":"fe5ed0ab-c915-450f-a616-2080f6c8c90a","name":"Cấu trúc dữ liệu và giải thuật","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["24629680-f852-4a16-b660-b6567b433639"]},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"9cb5a106-1081-47c9-a0b2-269093d9bf8a","subject":{"_id":"35dec163-f78a-47b5-807a-d75f70763d68","name":"Hệ quản trị cơ sở dữ liệu NoSQL MongoDB","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"ACCEPTANCE_TO_OPEN","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"8314ce58-20e2-4b27-8ac9-75aa54191282","subject":{"_id":"cfdb6928-39a8-4c32-b148-85ffddc9b8a2","name":"Hệ Thống Máy tính","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"c08dcb08-db89-436c-bcd5-2ee9ef9b6015","subject":{"_id":"5b982a77-d2a7-488e-adff-e1e8d113848d","name":"Tiếng Việt thực hành","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"94e51a7c-aa84-4fa5-856f-ad984a4c688b","subject":{"_id":"058909d1-d08e-49a4-a3db-c34a59bbaab0","name":"Quản trị doanh nghiệp","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"e3c7d54c-2834-41ba-8d29-96968c9cd43d","subject":{"_id":"27b58790-c91e-4ec2-865b-e316c1f6f982","name":"Nhập môn an toàn thông tin","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"b6770ba8-c84c-4392-8ab4-8e67e715cf7e","subject":{"_id":"19803538-fa00-46db-9b3e-4c1fe389309c","name":"Phân tích thiết kế hệ thống","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"89e7868c-a6e4-4f44-8463-34c342c78ba9","subject":{"_id":"50af5876-0c3f-4e9c-a7db-549e58148e69","name":"Đảm bảo chất lượng và Kiểm thử phần mềm","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"e29e6934-34af-44db-ad4c-67e8486fab4c","subject":{"_id":"447d5a3e-56c0-420b-bb3c-210ea8d3632e","name":"Phương pháp tính","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"e1d66815-5904-4009-b8ec-8adf5d551c59","subject":{"_id":"24629680-f852-4a16-b660-b6567b433639","name":"Kỹ thuật lập trình","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["82aab472-d77f-4734-9b5c-aabbcc2a6cf6"]},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"c64246e1-2240-4e16-a32a-98875115aeae","subject":{"_id":"e6436b12-134b-4145-ae69-c6cf4af628f0","name":"Hệ Thống và Công nghệ Web","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"01589c43-4346-48a5-8595-60be225e91ec","subject":{"_id":"24629680-f852-4a16-b660-b6567b433639","name":"Kỹ thuật lập trình","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["82aab472-d77f-4734-9b5c-aabbcc2a6cf6"]},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"f606d281-2edb-4d31-bd89-5790095ad32f","subject":{"_id":"2c295b83-54cc-4ac0-9776-0863be75eb60","name":"Toán cao cấp 1","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"b70e9115-f3fb-48c5-b749-ab38f2ce99f2","subject":{"_id":"82aab472-d77f-4734-9b5c-aabbcc2a6cf6","name":"Nhập môn Tin học","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"f3a153c3-aaf8-42c2-8df3-979c742b451b","subject":{"_id":"84bff92e-2e8f-4ed7-bd27-d030959297a7","name":"Toán ứng dụng","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"18f11575-7624-43c8-bb87-7bb9c4e6dc51","subject":{"_id":"601bcd47-019e-4867-918e-825b73a75e79","name":"Mô hình hóa dữ liệu NoSQL MongoDB","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["35dec163-f78a-47b5-807a-d75f70763d68"]},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"aec761b2-d63d-4761-a2f2-967ab903eed6","subject":{"_id":"0515146f-37a6-4111-a0a6-7a012c67d8df","name":"Toán cao cấp 2","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["2c295b83-54cc-4ac0-9776-0863be75eb60"]},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"4e11c728-b741-4619-8b3a-5e91846fb039","subject":{"_id":"d132f261-f788-495f-90c4-3a15126d1816","name":"Mạng máy tính","creditUnits":3,"theorySessions":1,"practicalSessions":2},"tuitionFee":1980000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"COURSE_CANCELLED","_class":"edu.iuh.administratorservice.entity.Course"},
                    {"_id":"f0fbf19c-f072-49c4-90e2-f84104655f1d","subject":{"_id":"5688926e-17c6-4cce-bc29-df1e29e60304","name":"Lập trình hướng sự kiện với công nghệ Java","creditUnits":3,"theorySessions":1,"practicalSessions":2,"prerequisites":["0ffebab2-fdb8-457e-a56f-08e3f744ed56","19803538-fa00-46db-9b3e-4c1fe389309c"]},"tuitionFee":2350000,"semester":{"_id":"dd2e5d9a-74c7-4232-9d56-ee253821241d","year":2024,"semesterNumber":1},"status":"ACCEPTANCE_TO_OPEN","_class":"edu.iuh.administratorservice.entity.Course"},
                ]
        var semesters = [
            { "_id": "dd2e5d9a-74c7-4232-9d56-ee253821241d", "year": 2024, "semesterNumber": 1, "_class": "edu.iuh.administratorservice.entity.Semester" },
            { "_id": "0dde8bd9-ed74-4f19-b70b-29b73a969ec6", "year": 2024, "semesterNumber": 2, "_class": "edu.iuh.administratorservice.entity.Semester" },
            { "_id": "15ab6081-0ff8-425f-aa55-2e206048e4a1", "year": 2024, "semesterNumber": 3, "_class": "edu.iuh.administratorservice.entity.Semester" }
            // Thêm dữ liệu môn học bắt buộc khác nếu cần
        ];
    function convertStatus(status) {
    if (status === "COURSE_CANCELLED") {
        return "Đã đóng";
    } else if (status === "ACCEPTANCE_TO_OPEN") {
        return "Chấp nhận mở lớp";
    } else {
        return status; // Giữ nguyên giá trị nếu không phải là trạng thái nêu trên
    }
}


function populateSemesterSelect(semesters) {
    var selectSemester = document.getElementById('semesterSelect');
    selectSemester.innerHTML = '';
    semesters.forEach(function(semester) {
        var option = document.createElement('option');
        option.value = semester._id; 
        option.text = `Học kì ${semester.semesterNumber} năm ${semester.year}`; 
        selectSemester.appendChild(option);
    });
}
populateSemesterSelect(semesters);
function displayCourseList(courses) {
    var tbody = document.getElementById('classList');
    tbody.innerHTML = ''; // Xóa hết dữ liệu cũ trong tbody

    courses.forEach(function (course, index) {
        var row = document.createElement("tr");
        row.innerHTML = "<td>" + (index + 1) + "</td>" +
            "<td>" + course.subject.name + "</td>" +
            "<td>" + course.subject.creditUnits + "</td>" +
            "<td>" + course.subject.theorySessions + "</td>" +
            "<td>" + course.subject.practicalSessions + "</td>" +
            "<td>" + course.tuitionFee + "</td>" +
            "<td>" + `Học kì ${course.semester.semesterNumber} năm ${course.semester.year}` + "</td>" +
            "<td>" + convertStatus(course.status) + "</td>" +
            "<td>" +
            "<button class='btn btn-warning edit-button'>Sửa</button>" + // Nút sửa
            "<button class='btn btn-danger delete-button'>Xóa</button>" + // Nút xóa
            "</td>";
        tbody.appendChild(row);

        // Thêm sự kiện click cho nút sửa
       row.querySelector('.edit-button').addEventListener('click', function () {
            function populateForm(course) {
        document.getElementById('courseInput').value = course.subject.name;
        document.getElementById('creditInput').value = course.subject.creditUnits;
        document.getElementById('theoryHoursInput').value = course.subject.theorySessions;
        document.getElementById('practiceHoursInput').value = course.subject.practicalSessions;
        document.getElementById('feeInput').value = course.tuitionFee;
        document.getElementById('semesterSelect').value = course.semester._id;

        // Đặt lại giá trị của radio button dựa vào trạng thái
        if (course.status === 'ACCEPTANCE_TO_OPEN') {
            document.getElementById('status1').checked = true;
        } else if (course.status === 'COURSE_CANCELLED') {
            document.getElementById('status2').checked = true;
        }
    }

        populateForm(course);
});

        // Thêm sự kiện click cho nút xóa
        row.querySelector('.delete-button').addEventListener('click', function () {
             // Xóa dòng hiện tại khỏi mảng subjects
            courses.splice(courses.indexOf(course), 1);
            // Sau đó hiển thị lại danh sách môn học
            displayCourseList(courses);
        });
    });
}


// Gọi hàm để đổ dữ liệu vào bảng
displayCourseList(courses);

            </script>
    </body>
</html>
